
@{
    ViewData["Title"] = "Order Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";

    Theater theater = UAMovie.Models.Theater.testData()[0];
    Movie movie = UAMovie.Models.Movie.testData()[0];
    CreditCard creditCard = UAMovie.Models.CreditCard.testData()[0];

    TicketOrder order = TicketOrder.testData()[0];
    Showing showing = Showing.testData()[0];

    //The display of the "Cancel" button is determined by whether the movie has already started
    // and the status of the order
    showing.StartTime = showing.StartTime.AddDays(2);
    //order.Status = "Cancelled";
}

<h2>@ViewData["Title"]</h2>

<p>
    <em>@movie.Name</em> (Rated <strong>@movie.AgeRating</strong>, @movie.DurationText)<br />
    @theater.Name<br />
    @theater.StreetNumber @theater.Street<br />
    @theater.City, @theater.State @theater.Zip<br />
    @showing.StartTime.ToLongDateString() at @showing.StartTime.ToLongTimeString()<br />
</p>

<p>
    Cost: @String.Format("{0:C2}", order.Cost)
    <ul>
        <li> @order.AdultTickets Adult Ticket(s)</li>
        <li> @order.ChildTickets Child Ticket(s)</li>
        <li> @order.SeniorTickets Senior Ticket(s)</li>
    </ul>
</p>

<p>
    Order ID: @order.ID <br/>
    Status: @order.Status
</p>

@{
    if (order.Status != "Cancelled" && DateTime.Now < showing.StartTime)
    {
        @using (Html.BeginForm())
        {
            <input type="submit" value="Cancel order"/>
        }
    }
}
Back to <a asp-area="" asp-action="OrderHistory">order history</a>.

